"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("react"),n=e(t),r=e(require("use-isomorphic-layout-effect")),a=e(require("resize-observer-polyfill")),i=n.createContext(null),o=i.Provider,u=function(){var e=n.useContext(i);if(null===e)throw new Error("No WeekPicker Context found. Please Wrap Hwc components in <HwcProvider />");return e},s=function(e){var t=l(e),n=t.getMinutes()+60*t.getHours(),r=60*Math.round(n/60*4)/4,a=c(e);return a.setMinutes(r),a},c=function(e){var t=new Date(e);return t.setHours(0,0,0,0),t},l=function(e){var t=new Date(e);return t.setSeconds(0,0),t};function d(){return(d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function f(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t.indexOf(n=i[r])>=0||(a[n]=e[n]);return a}var v=["onMouseMove","onMouseDown","style","children"],p=n.forwardRef((function(e,i){var o=e.onMouseMove,c=void 0===o?function(){}:o,l=e.onMouseDown,p=void 0===l?function(){}:l,g=e.style,m=e.children,h=f(e,v),y=u(),w=y.setPos,D=y.date,x=y.setWidth,b=y.setStartDragDate,E=y.requestAddEventHandler,T=y.shadowEvent,H=y.cellHeight,M=t.useState(null),k=M[0],C=M[1];r((function(){if(k){var e=new a((function(e){var t=e[0];t&&x(t.contentRect.width)}));return e.observe(k),function(){e.disconnect()}}}),[k,x]);var S=t.useRef(),O=t.useCallback((function(e){e.target instanceof Element&&e.target.hasAttribute("week-picker-cell")&&(e.preventDefault(),S.current=D,p(e))}),[D,p]),P=t.useCallback((function(e){var t=e.currentTarget.getBoundingClientRect();w({x:e.clientX-t.left,y:e.clientY-t.top}),c(e),S.current&&!T&&s(S.current).getTime()!==s(D).getTime()&&b(S.current)}),[w,c,T,D,b]);return r((function(){var e=function(){S.current&&E(T||{startDate:D,endDate:new Date(D.getTime()+72e5)}),S.current=void 0,b(void 0)};return window.addEventListener("mouseup",e),function(){window.removeEventListener("mouseup",e)}}),[b,E,T,D]),n.createElement("div",Object.assign({},h,{style:d({position:"relative",height:24*H+"px"},g),onMouseMove:P,onDrag:function(e){return e.preventDefault()},onMouseDown:O,ref:i||C}),m)})),g=["style","colStyle","children"],m=function(e){return n.createElement("div",{style:e.style})},h=n.forwardRef((function(e,r){var a=e.style,i=e.colStyle,o=e.children,s=f(e,g),c=u(),l=c.startDay,v=c.cellHeight,p=c.cellWidth,h=new Array(c.daysCount).fill(0).map((function(e,t){return new Date(l.getTime()+864e5*t)})),y=new Array(24).fill(0).map((function(e,t){return t}));return n.createElement("div",Object.assign({},s,{ref:r,style:d({position:"absolute",width:"100%",display:"flex"},a)}),h.map((function(e,r){return n.createElement("div",{key:r,style:d({flex:"0 0 1",width:"100%"},i)},y.map((function(a){var i=0===r?"start":r===h.length-1?"end":void 0,u=0===a?"start":a===y.length-1?"end":void 0;return n.createElement(t.Fragment,{key:a},n.Children.map((o||m)({cellHeight:v,cellWidth:p,style:{height:v+"px",borderLeft:"start"===i?void 0:"#aaa solid 1px",borderTop:"start"===u?void 0:"#aaa solid 1px",boxSizing:"border-box"},x:i,y:u,date:e}),(function(e){return n.cloneElement(e,{"week-picker-cell":""})})))})))})))})),y=function(e){for(var t=[],n=e.endDate.getTime(),r=0;r<20;r++){var a=t[t.length-1],i=a?c(a.startDate).getTime()+1728e5:c(e.startDate).getTime()+864e5,o=i<n;if(t.push({startDate:new Date(a?a.endDate:e.startDate),endDate:new Date(o?i:n)}),!o)break}return t},w=function(e){var t=e.rect;return n.createElement("div",{style:{position:"absolute",backgroundColor:"orange",border:"solid orangered 2px",boxSizing:"border-box",borderRadius:"3px",width:t.width-2+"px",height:t.height-2+"px",left:t.left+"px",top:t.top+"px"}})};exports.HwcContext=i,exports.HwcDragPane=p,exports.HwcEventsRenderer=function(e){var r=e.renderCard,a=u(),i=a.events,o=a.cellWidth,s=a.cellHeight,l=a.startDay,f=a.daysCount,v=a.shadowEvent,p=t.useMemo((function(){var e=function(e,t){var n=c(e).getTime(),r=n+864e5*t;return function(e){return e.startDate.getTime()<r&&e.endDate.getTime()>n}}(l,f);return[].concat(i,v?[v]:[]).filter(e).map(y).map((function(e){return e.map((function(t,n){return d({},t,{isFirst:0===n,isLast:n===e.length-1})}))})).flat().filter(e).map((function(e){var t=(c(e.startDate).getTime()-c(l).getTime())/864e5,n=e.endDate.getTime()-e.startDate.getTime(),r=e.startDate.getTime()-c(e.startDate).getTime();return{event:{startDate:e.startDate,endDate:e.endDate},rect:{width:o,height:n/36e5*s,left:t*o,top:r/36e5*s},isFirst:e.isFirst,isLast:e.isLast}}))}),[i,o,l,f,v,s]);return n.createElement("div",{style:{position:"relative"}},p.map((function(e,a){return n.createElement(t.Fragment,{key:a},(r||w)(e))})))},exports.HwcGrid=h,exports.HwcHeader=function(e){var t=e.locale,r=e.dateFormatOptions,a=void 0===r?{day:"2-digit",weekday:"short"}:r,i=u(),o=i.startDay,s=new Array(i.daysCount).fill(0).map((function(e,t){return new Date(o.getTime()+864e5*t)}));return n.createElement("div",{style:{display:"flex"}},s.map((function(e,r){return n.createElement("div",{key:r,style:{flex:"0 0 1",width:"100%"}},e.toLocaleDateString(t,a))})))},exports.HwcProvider=o,exports.useHwc=function(e){void 0===e&&(e={});var n=e,r=n.startDay,a=void 0===r?new Date:r,i=n.cellHeight,o=void 0===i?50:i,u=n.daysCount,l=void 0===u?7:u,d=n.events,f=void 0===d?[]:d,v=n.onAddEventRequest,p=void 0===v?function(){}:v,g=t.useMemo((function(){return c(a)}),[a]),m=t.useState(0),h=m[0],y=m[1],w=t.useMemo((function(){return h/l}),[h,l]),D=t.useState({x:0,y:0}),x=D[0],b=D[1],E=t.useMemo((function(){return function(e,t,n,r){var a=e.y*(60/r),i=Math.trunc(e.x/(t||1)*7);return new Date(n.getTime()+864e5*i+6e4*a)}(x,h,g,o)}),[x,h,g,o]),T=t.useState(),H=T[0],M=T[1],k=t.useMemo((function(){if(H){var e=[s(H),s(E)].sort((function(e,t){return e.getTime()-t.getTime()}));return{startDate:e[0],endDate:e[1]}}}),[H,E]),C=t.useCallback((function(e){p(e)}),[p]);return{pos:x,date:E,cellWidth:w,cellHeight:o,startDay:g,daysCount:l,events:f,setPos:b,setWidth:y,shadowEvent:k,setStartDragDate:M,requestAddEventHandler:C}},exports.useHwcContext=u;
//# sourceMappingURL=hwc.cjs.production.min.js.map
